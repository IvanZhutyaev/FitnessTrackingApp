<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="FitnessTrackingApp.MainPage"
             BackgroundColor="#0C1B33"
             NavigationPage.HasNavigationBar="False">

    <Grid>
        <!-- Кнопка входа/имя пользователя -->
        <Button x:Name="LoginButton"
                Text="Вход"
                FontSize="14"
                BackgroundColor="#00C9FF"
                TextColor="#0C1B33"
                CornerRadius="15"
                Padding="10,5"
                HorizontalOptions="End"
                VerticalOptions="Start"
                Margin="0,30,20,0"
                Clicked="LoginButton_Clicked"
                WidthRequest="120"
                HeightRequest="40"
                ZIndex="10"/>

        <ScrollView>
            <VerticalStackLayout Spacing="0">
                <!-- Шапка -->
                <Grid HeightRequest="280" BackgroundColor="#1A3A6F">
                    <Image Source="fitness_bg.jpg" Aspect="AspectFill" Opacity="0.2"/>
                    <VerticalStackLayout VerticalOptions="Center" Padding="30" Spacing="15">
                        <Label Text="FITNESS TRACKER" 
                               FontSize="28"
                               TextColor="White"
                               FontAttributes="Bold"/>
                        <Label Text="Ваш персональный тренер и диетолог"
                               FontSize="18"
                               TextColor="#A0E7FF"/>
                        <BoxView HeightRequest="3" WidthRequest="100" Color="#00C9FF" HorizontalOptions="Start"/>
                    </VerticalStackLayout>
                </Grid>

                <!-- Основной контент - Кнопки функционала -->
                <VerticalStackLayout Padding="20" Spacing="25" Margin="0,20">

                    <!-- Профиль -->
                    <Grid>
                        <Frame CornerRadius="20" 
                               BackgroundColor="#152642"
                               BorderColor="#2A4D80"
                               Padding="0"
                               HasShadow="True">
                            <Grid ColumnDefinitions="Auto, *" ColumnSpacing="15" Padding="20">
                                <Label Text="👤" FontSize="32" VerticalOptions="Center"/>
                                <VerticalStackLayout Grid.Column="1">
                                    <Label Text="Профиль" 
                                           FontSize="20" 
                                           TextColor="White" 
                                           FontAttributes="Bold"/>
                                    <Label Text="Личные данные, цели, аватар" 
                                           TextColor="#A0E7FF"
                                           FontSize="14"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Frame>
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnProfileTapped"/>
                        </Grid.GestureRecognizers>
                    </Grid>

                    <!-- Тренировки -->
                    <Grid>
                        <Frame CornerRadius="20" 
                               BackgroundColor="#152642"
                               BorderColor="#2A4D80"
                               Padding="0"
                               HasShadow="True">
                            <Grid ColumnDefinitions="Auto, *" ColumnSpacing="15" Padding="20">
                                <Label Text="💪" FontSize="32" VerticalOptions="Center"/>
                                <VerticalStackLayout Grid.Column="1">
                                    <Label Text="Тренировки" 
                                           FontSize="20" 
                                           TextColor="White" 
                                           FontAttributes="Bold"/>
                                    <Label Text="Каталог упражнений, создание программ" 
                                           TextColor="#A0E7FF"
                                           FontSize="14"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Frame>
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnWorkoutsTapped"/>
                        </Grid.GestureRecognizers>
                    </Grid>

                    <!-- Активность -->
                    <Grid>
                        <Frame CornerRadius="20" 
                               BackgroundColor="#152642"
                               BorderColor="#2A4D80"
                               Padding="0"
                               HasShadow="True">
                            <Grid ColumnDefinitions="Auto, *" ColumnSpacing="15" Padding="20">
                                <Label Text="🚶‍♂️" FontSize="32" VerticalOptions="Center"/>
                                <VerticalStackLayout Grid.Column="1">
                                    <Label Text="Активность" 
                                           FontSize="20" 
                                           TextColor="White" 
                                           FontAttributes="Bold"/>
                                    <Label Text="Подсчет шагов, графики активности" 
                                           TextColor="#A0E7FF"
                                           FontSize="14"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Frame>
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnActivityTapped"/>
                        </Grid.GestureRecognizers>
                    </Grid>

                    <!-- Питание -->
                    <Grid>
                        <Frame CornerRadius="20" 
                               BackgroundColor="#152642"
                               BorderColor="#2A4D80"
                               Padding="0"
                               HasShadow="True">
                            <Grid ColumnDefinitions="Auto, *" ColumnSpacing="15" Padding="20">
                                <Label Text="🍎" FontSize="32" VerticalOptions="Center"/>
                                <VerticalStackLayout Grid.Column="1">
                                    <Label Text="Питание" 
                                           FontSize="20" 
                                           TextColor="White" 
                                           FontAttributes="Bold"/>
                                    <Label Text="Дневник питания, расчет КБЖУ" 
                                           TextColor="#A0E7FF"
                                           FontSize="14"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Frame>
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnNutritionTapped"/>
                        </Grid.GestureRecognizers>
                    </Grid>

                    <!-- Прогресс -->
                    <Grid>
                        <Frame CornerRadius="20" 
                               BackgroundColor="#152642"
                               BorderColor="#2A4D80"
                               Padding="0"
                               HasShadow="True">
                            <Grid ColumnDefinitions="Auto, *" ColumnSpacing="15" Padding="20">
                                <Label Text="📈" FontSize="32" VerticalOptions="Center"/>
                                <VerticalStackLayout Grid.Column="1">
                                    <Label Text="Прогресс" 
                                           FontSize="20" 
                                           TextColor="White" 
                                           FontAttributes="Bold"/>
                                    <Label Text="Графики изменений, достижения" 
                                           TextColor="#A0E7FF"
                                           FontSize="14"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Frame>
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnProgressTapped"/>
                        </Grid.GestureRecognizers>
                    </Grid>

                    <!-- Уведомления -->
                    <Grid>
                        <Frame CornerRadius="20" 
                               BackgroundColor="#152642"
                               BorderColor="#2A4D80"
                               Padding="0"
                               HasShadow="True">
                            <Grid ColumnDefinitions="Auto, *" ColumnSpacing="15" Padding="20">
                                <Label Text="🔔" FontSize="32" VerticalOptions="Center"/>
                                <VerticalStackLayout Grid.Column="1">
                                    <Label Text="Уведомления" 
                                           FontSize="20" 
                                           TextColor="White" 
                                           FontAttributes="Bold"/>
                                    <Label Text="Напоминания о тренировках, воде" 
                                           TextColor="#A0E7FF"
                                           FontSize="14"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Frame>
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnNotificationsTapped"/>
                        </Grid.GestureRecognizers>
                    </Grid>

                    <!-- Настройки -->
                    <Grid Margin="0,0,0,40">
                        <Frame CornerRadius="20" 
                               BackgroundColor="#152642"
                               BorderColor="#2A4D80"
                               Padding="0"
                               HasShadow="True">
                            <Grid ColumnDefinitions="Auto, *" ColumnSpacing="15" Padding="20">
                                <Label Text="⚙️" FontSize="32" VerticalOptions="Center"/>
                                <VerticalStackLayout Grid.Column="1">
                                    <Label Text="Настройки" 
                                           FontSize="20" 
                                           TextColor="White" 
                                           FontAttributes="Bold"/>
                                    <Label Text="Тема, единицы измерения, синхронизация" 
                                           TextColor="#A0E7FF"
                                           FontSize="14"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Frame>
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnSettingsTapped"/>
                        </Grid.GestureRecognizers>
                    </Grid>
                </VerticalStackLayout>
            </VerticalStackLayout>
        </ScrollView>

        <!-- Модальное окно входа/регистрации -->
        <ContentView x:Name="AuthPopup"
                     IsVisible="False"
                     BackgroundColor="#80000000"
                     VerticalOptions="Fill"
                     HorizontalOptions="Fill"
                     ZIndex="100">
            <Frame BackgroundColor="White"
                   CornerRadius="20"
                   Padding="25"
                   HorizontalOptions="Center"
                   VerticalOptions="Center"
                   WidthRequest="350"
                   HeightRequest="500"
                   HasShadow="True">
                <VerticalStackLayout Spacing="15">
                    <Button Text="← Назад"
                            BackgroundColor="Transparent"
                            TextColor="#0C1B33"
                            FontAttributes="Bold"
                            HorizontalOptions="Start"
                            Clicked="CloseAuthPopup_Clicked"
                            Margin="-10,-10,-10,10"/>

                    <Label x:Name="AuthPopupTitle"
                           Text="Вход в систему"
                           FontSize="22"
                           FontAttributes="Bold"
                           TextColor="#0C1B33"
                           HorizontalOptions="Center"/>

                    <Entry x:Name="UsernameEntry"
                           Placeholder="Имя пользователя"
                           FontSize="16"
                           BackgroundColor="#F0F4FA"
                           TextColor="#0C1B33"
                           Margin="0,10,0,0"
                           HeightRequest="50"/>

                    <Entry x:Name="PasswordEntry"
                           Placeholder="Пароль"
                           IsPassword="True"
                           FontSize="16"
                           BackgroundColor="#F0F4FA"
                           TextColor="#0C1B33"
                           HeightRequest="50"/>

                    <Entry x:Name="ConfirmPasswordEntry"
                           Placeholder="Повторите пароль"
                           IsPassword="True"
                           FontSize="16"
                           BackgroundColor="#F0F4FA"
                           TextColor="#0C1B33"
                           HeightRequest="50"
                           IsVisible="False"/>

                    <Button x:Name="AuthActionButton"
                            Clicked="AuthActionButton_Clicked"
                            Text="Войти"
                            BackgroundColor="#00C9FF"
                            TextColor="#0C1B33"
                            CornerRadius="10"
                            HorizontalOptions="Fill"
                            HeightRequest="50"
                            Margin="0,20,0,0"/>

                    <Button x:Name="SwitchAuthModeButton"
                            Text="Нет аккаунта? Зарегистрируйтесь!"
                            BackgroundColor="Transparent"
                            TextColor="#0C1B33"
                            FontAttributes="Bold"
                            HorizontalOptions="Center"
                            Margin="0,10,0,0"
                            Clicked="SwitchAuthModeButton_Clicked"
                            Padding="0"/>
                </VerticalStackLayout>
            </Frame>
        </ContentView>

       
    </Grid>
</ContentPage>